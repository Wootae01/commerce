<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ÏÉÅÌíà Í¥ÄÎ¶¨</title>
</head>
<body>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Ïû•Î∞îÍµ¨Îãà</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a2e0b4b8d6.js" crossorigin="anonymous"></script>
    <style>
        .big-checkbox {
            transform: scale(1.5);
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-light">
<div th:replace="~{fragments/header :: siteHeader}"></div>
<div class="container py-5">
    <h2 class="mb-4 fw-bold text-center">üõí Ïû•Î∞îÍµ¨Îãà</h2>


    <!-- ÏÉÅÌíà ÌÖåÏù¥Î∏î -->
    <div class="card shadow-sm">
        <div class="card-body p-0">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                <tr>
                    <th>ÏÑ†ÌÉù</th>
                    <th>Ïù¥ÎØ∏ÏßÄ</th>
                    <th>ÏÉÅÌíàÎ™Ö</th>
                    <th>Í∞ÄÍ≤©</th>
                    <th>ÏàòÎüâ</th>
                    <th>ÏÇ≠Ï†ú</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="product : ${cartProducts}">
                    <td th:class="d-none" th:text="${product.id}"></td>
                    <td>
                        <div class="form-check justify-content-center">
                            <form th:action="@{'/cart/select/'+${product.id}}" method="post" class="d-inline">
                                <input type="checkbox"
                                       name="checked"
                                       class="form-check-input big-checkbox"
                                       th:checked="${product.checked}"
                                       onchange="this.form.submit()"
                                >
                            </form>

                        </div>
                    </td>
                    <td>
                        <img th:src="@{${product.mainImageUrl}}" alt="ÏÉÅÌíà ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"
                             style="width:60px; height:60px; object-fit:cover;" class="rounded">
                    </td>
                    <td th:text="${product.name}"></td>
                    <td th:text="${#numbers.formatInteger(product.price, 3, 'COMMA')} + 'Ïõê'"></td>
                    <td>
                        <form th:action="@{'/cart/edit/' + ${product.id}}" method="post" class="d-inline">
                            <select name="quantity" class="form-select form-select-sm"
                                    style="width: 80px;"
                                    onchange="this.form.submit()">
                                <option th:each="i : ${#numbers.sequence(1, 10)}"
                                        th:value="${i}"
                                        th:selected="${product.quantity == i}"
                                        th:text="${i}">
                                </option>
                            </select>
                        </form>
                    </td>
                    <td>
                        <form th:action="@{'/cart/delete/' + ${product.id}}"
                              method="post" class="d-inline">
                            <button type="submit" class="btn btn-sm btn-danger"
                                    onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">
                                ÏÇ≠Ï†ú
                            </button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>

            <div class="p-4">
                <div>
                    <h5 class="fw-bold">
                        Ï¥ù Í∏àÏï°:
                        <span class="text-danger" th:text="${#numbers.formatInteger(totalPrice, 3, 'COMMA')} + 'Ïõê'"}></span>
                    </h5>
                </div>
                <form method="get" th:action="@{/order}">
                    <button class="my-2 btn btn-primary" >Ï£ºÎ¨∏ ÌïòÍ∏∞</button>
                </form>

            </div>

        </div>
    </div>

</div>

</body>
</html>

</body>
</html>