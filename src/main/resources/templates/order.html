<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Ï£ºÎ¨∏ÌïòÍ∏∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">

    <style>
        .section-title {
            font-weight: bold;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .price-box {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
        }
    </style>
</head>

<body class="bg-light">

<div class="container py-5">

    <!-- ÌéòÏù¥ÏßÄ Ï†úÎ™© -->
    <h2 class="fw-bold mb-4 text-center">üßæ Ï£ºÎ¨∏ÌïòÍ∏∞</h2>

    <form th:action="@{/order}" method="post" th:object="${orderForm}">

        <!-- orderTypeÎèÑ Í∞ôÏù¥ Ï†ÑÏÜ° -->
        <input type="hidden" th:field="*{orderType}"/>

        <!-- Ï£ºÎ¨∏ ÏÉÅÌíà Ï†ïÎ≥¥ -->
        <div class="section-title">Ï£ºÎ¨∏ ÏÉÅÌíà</div>
        <div class="card shadow-sm mb-4">
            <div class="card-body">

                <div class="table-responsive">
                    <table class="table align-middle">
                        <thead class="table-light">
                        <tr>
                            <th>ÏÉÅÌíà Ï†ïÎ≥¥</th>
                            <th class="text-center" style="width:120px">ÏàòÎüâ</th>
                            <th class="text-end" style="width:140px">ÏÉÅÌíàÍ∏àÏï°</th>
                            <th class="text-end" style="width:140px">Ìï©Í≥Ñ</th>
                        </tr>
                        </thead>

                        <tbody>
                        <!-- Ï£ºÎ¨∏ ÏÉÅÌíà Î£®ÌîÑ -->
                        <tr th:each="orderItem : ${orderItems}">
                            <td>
                                <div class="d-flex align-items-center">
                                    <img th:src="@{${orderItem.mainImageUrl}}"
                                         alt="ÏÉÅÌíà Ïù¥ÎØ∏ÏßÄ"
                                         class="order-item-img me-3 rounded"
                                         style="width:60px; height:60px; object-fit:cover;">
                                    <div>
                                        <div class="fw-semibold" th:text="${orderItem.name}">
                                            ÏÉÅÌíàÎ™Ö
                                        </div>
                                        <div class="text-muted small"
                                             th:text="'ÏàòÎüâ: ' + ${orderItem.quantity} + 'Í∞ú'">
                                            ÏàòÎüâ: 1Í∞ú
                                        </div>
                                    </div>
                                </div>

                                <!-- Ïû•Î∞îÍµ¨Îãà Ï£ºÎ¨∏Ïùº Îïå: cartProductIds Î¶¨Ïä§Ìä∏Î°ú Î∞îÏù∏Îî© -->
                                <input type="hidden"
                                       th:if="${orderForm.orderType == T(com.commerce.domain.enums.OrderType).CART}"
                                       name="cartProductIds"
                                       th:value="${orderItem.id}"/>
                            </td>

                            <!-- ÏàòÎüâ -->
                            <td class="text-center">
                                <span th:text="${orderItem.quantity}">1</span>Í∞ú
                            </td>

                            <!-- ÏÉÅÌíà Îã®Í∞Ä -->
                            <td class="text-end">
                        <span th:text="${#numbers.formatInteger(orderItem.unitPrice, 3, 'COMMA')}">
                            10,000
                        </span> Ïõê
                            </td>

                            <!-- Ìï©Í≥Ñ = Îã®Í∞Ä * ÏàòÎüâ -->
                            <td class="text-end">
                        <span th:text="${#numbers.formatInteger(orderItem.totalPrice, 3, 'COMMA')}">
                            10,000
                        </span> Ïõê
                            </td>
                        </tr>

                        </tbody>
                    </table>
                </div>

                <!-- Ï¥ù ÏÉÅÌíà Í∏àÏï° -->
                <div class="text-end fw-bold mt-3">
                    Ï¥ù ÏÉÅÌíà Í∏àÏï°:
                    <span th:text="${#numbers.formatInteger(orderPrice.totalPrice, 3, 'COMMA')} + 'Ïõê'"
                          class="text-danger">
                0Ïõê
            </span>
                </div>

                <!-- Ï¶âÏãú Íµ¨Îß§Ïùº Îïå: productId, quantity hiddenÏúºÎ°ú Ï†ÑÏÜ° -->
                <input type="hidden"
                       th:if="${orderForm.orderType == T(com.commerce.domain.enums.OrderType).BUY_NOW}"
                       th:field="*{productId}"/>
                <input type="hidden"
                       th:if="${orderForm.orderType == T(com.commerce.domain.enums.OrderType).BUY_NOW}"
                       th:field="*{quantity}"/>

            </div>
        </div>


        <!-- Î∞∞ÏÜ° Ï†ïÎ≥¥ -->
        <div class="section-title">Î∞∞ÏÜ° Ï†ïÎ≥¥</div>
        <div class="card shadow-sm mb-4">
            <div class="card-body">

                <div class="mb-3">
                    <label class="form-label">Î∞õÎäî ÏÇ¨Îûå</label>
                    <input type="text" class="form-control" th:field="*{name}">
                </div>

                <div class="mb-3">
                    <label class="form-label">Ïó∞ÎùΩÏ≤ò</label>
                    <input type="text" class="form-control" th:field="*{phone}">
                </div>

                <div class="mb-3">
                    <label class="form-label">Ï£ºÏÜå</label>
                    <input type="text" class="form-control mb-2" th:field="*{address}">
                    <input type="text" class="form-control" placeholder="ÏÉÅÏÑ∏ Ï£ºÏÜå ÏûÖÎ†•" th:field="*{addressDetail}">
                </div>

                <div class="mb-3">
                    <label class="form-label">ÏöîÏ≤≠ ÏÇ¨Ìï≠</label>
                    <textarea class="form-control" rows="3" th:field="*{requestNote}"></textarea>
                </div>

            </div>
        </div>


        <!-- Í≤∞Ï†ú Î∞©Ïãù -->
        <div class="section-title">Í≤∞Ï†ú Î∞©Ïãù</div>
        <div class="card shadow-sm mb-4">
            <div class="card-body">

                <div class="form-check">
                    <input class="form-check-input"
                           type="radio"
                           th:field="*{payment}"
                           value="CARD">
                    <label class="form-check-label">Ïπ¥Îìú Í≤∞Ï†ú</label>
                </div>

                <div class="form-check mt-2">
                    <input class="form-check-input"
                           type="radio"
                           th:field="*{payment}"
                           value="CASH">
                    <label class="form-check-label">Î¨¥ÌÜµÏû• ÏûÖÍ∏à</label>
                </div>

            </div>
        </div>


        <!-- Í≤∞Ï†ú Í∏àÏï° ÏöîÏïΩ -->
        <div class="section-title">Í≤∞Ï†ú Í∏àÏï°</div>

        <div class="price-box shadow-sm mb-4">

            <div class="d-flex justify-content-between my-1">
                <span>ÏÉÅÌíà Í∏àÏï°</span>
                <strong th:text="${orderPrice.totalPrice} + 'Ïõê'"></strong>
            </div>

            <div class="d-flex justify-content-between my-1">
                <span>Î∞∞ÏÜ°ÎπÑ</span>
                <strong th:text="${orderPrice.deliveryFee} + 'Ïõê'"></strong>
            </div>

            <hr>

            <div class="d-flex justify-content-between">
                <span class="fw-bold">ÏµúÏ¢Ö Í≤∞Ï†ú Í∏àÏï°</span>
                <strong class="text-danger" th:text="${orderPrice.finalPrice} + 'Ïõê'"></strong>
            </div>
        </div>


        <!-- Ï£ºÎ¨∏ Ï†úÏ∂ú Î≤ÑÌäº -->
        <button type="submit" class="btn btn-primary w-100 py-2 fw-bold">
            Í≤∞Ï†úÌïòÍ∏∞
        </button>

    </form>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
