<!-- file: order-cancel.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>주문 취소 결과</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        .card-wrap { max-width: 760px; }

        .icon-circle {
            width: 64px; height: 64px; border-radius: 50%;
            display: inline-flex; align-items: center; justify-content: center;
        }
        .icon-success { background: #eaf7ee; }
        .icon-fail { background: #fdecea; }
        .icon-circle svg { width: 34px; height: 34px; }

        .muted-label { color: #6c757d; font-size: .9rem; }
        .value-text { font-weight: 600; }
        .btn-wide { min-width: 132px; }
    </style>
</head>

<body class="bg-light">
<div class="container py-5">
    <div class="mx-auto card-wrap">

        <!-- ===== 성공 화면 ===== -->
        <div th:if="${result != null and result.success}">
            <div class="text-center mb-4">
                <div class="icon-circle icon-success mb-3">
                    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M20 6L9 17l-5-5" stroke="#198754" stroke-width="2.5"
                              stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h2 class="fw-bold mb-1">주문 취소가 완료되었습니다</h2>
                <p class="text-secondary mb-0">취소/환불 처리 상태는 주문 내역에서 확인할 수 있어요.</p>
            </div>

            <div class="card shadow-sm border-0">
                <div class="card-body p-4">

                    <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2 mb-3">
                        <div>
                            <div class="muted-label">주문번호</div>
                            <div class="value-text fs-5" th:text="${result.orderNumber}">ORD-XXXX</div>
                        </div>
                        <div class="text-md-end">
                            <div class="muted-label">취소 완료일시</div>
                            <div class="value-text" th:text="${result.canceledAt}">2025-12-21T12:34</div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <div class="muted-label">취소 금액</div>
                            <div class="value-text text-danger fs-5"
                                 th:text="${#numbers.formatInteger(result.cancelAmount, 3, 'COMMA')} + '원'">0원</div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="muted-label">환불 수단</div>
                            <div class="value-text" th:text="${result.refundMethod}">카드 결제 취소</div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a class="btn btn-outline-secondary btn-wide" th:href="@{/orders/list}">주문 내역</a>
                        <a class="btn btn-primary btn-wide" th:href="@{/}">홈으로</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== 실패 화면 ===== -->
        <div th:unless="${result != null and result.success}">
            <div class="text-center mb-4">
                <div class="icon-circle icon-fail mb-3">
                    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M12 8v5" stroke="#dc3545" stroke-width="2.5"
                              stroke-linecap="round"/>
                        <path d="M12 16.5h.01" stroke="#dc3545" stroke-width="3"
                              stroke-linecap="round"/>
                        <path d="M10.29 3.86h3.42c.69 0 1.33.37 1.67.97l6.11 10.58c.34.6.34 1.34 0 1.94l-6.11 10.58c-.34.6-.98.97-1.67.97h-3.42c-.69 0-1.33-.37-1.67-.97L.51 17.39a1.94 1.94 0 0 1 0-1.94L8.62 4.83c.34-.6.98-.97 1.67-.97Z"
                              stroke="#dc3545" stroke-width="1.8" stroke-linejoin="round"/>
                    </svg>
                </div>

                <h2 class="fw-bold mb-1">주문 취소에 실패했습니다</h2>
                <p class="text-secondary mb-0">아래 사유를 확인하고 다시 시도해 주세요.</p>
            </div>

            <div class="card shadow-sm border-0">
                <div class="card-body p-4">

                    <div class="mb-2">
                        <div class="muted-label">주문번호</div>
                        <div class="value-text fs-5" th:text="${result != null ? result.orderNumber : ''}">ORD-XXXX</div>
                    </div>

                    <div class="alert alert-danger mt-3 mb-0" role="alert">
                        <div class="fw-semibold mb-1">실패 사유</div>
                        <div th:text="${result != null ? result.errorMessage : '요청 처리 중 오류가 발생했습니다.'}">
                            요청 처리 중 오류가 발생했습니다.
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="button" class="btn btn-outline-secondary btn-wide" onclick="history.back()">뒤로</button>
                        <a class="btn btn-primary btn-wide"
                           th:href="@{'/orders/' + ${result != null ? result.orderNumber : ''}}">
                            주문 상세
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
